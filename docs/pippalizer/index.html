<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="icon" href="/favicon.png"></link>
        <link rel="stylesheet" type="text/css" href="../style/style.css"></link>
        <link rel="stylesheet" type="text/css" href="style/style.css"></link>
        <title>Grapple's Flippin' Pippalizer</title>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="js/lib.js"></script>
        <script src="js/ui.js"></script>
        <script>
            function toggleHelp(help_id) {
                $( "#" + help_id ).toggle('show');
            }
        </script>
    </head>

    <!--
        TODO: UI. Have a pip color chooser that lets you choose from the 5 colors. Have a data field for the number 
                  with an up/down. Allow you to add new rows for new pips, and there are three columns. 
                  Pip color chooser also needs a 'no pip' option.
        TODO: UI. Be able to save a result so you can compare later. 
        TODO: UI. Want to do charting. This coulde include showing the charting of all values calculated, with the 
                  ones where the operator was true in a different colour. Also could be a chart for the saved tests.
                  This will involve various rejigging in the engine of the code.
        TODO: Some kind of best fit notion. Have it run over the flips looking for the best return value.
              This involves indicating something is variable. 
              One approach is to indicate the deck as WG*BK*, and it will adjust those numbers, keeping a max of 40.
              It could know the counts for how many of each pip type there are. Or maybe just the ones that have less 
              than 14 cards. 
        TODO: Load pips from FM. Maybe file upload (into browser?) an OCTGN file, and it has its own json file 
              with the pips on each card.
        TODO: Automatic tables for pip-patterns. ie:   W3:12O37:28 would calculate multiple times over to form a table.
              Or should it be more specific, i.e.:    range(W,3,12) range(O,37,28). A fourth parameter could be the step.
              Ranges would lead to tables being output, which would include the pattern as a first column and the number 
              of cards as a second. 
        TODO: Make white=+2 a default-on option. 
        TODO: Show a running total in the Chosen Deck section.
    -->

    </head>
    <body>
        <!--<h1 id='sitetitle'><a href="../index.html">Freelance Peace Keeping</a></h1> -->
<h1 id='sitetitle'><a href="../index.html">Grapple's Flippin' Pippalizer</a></h1>
<div class="content" style="width: 90%;">

<p class="commentary">"I don't always plan my attacks, but when I do, I always use Grapple's Frippling Pippalizer.... erm, Pappling Flappalizer.... gah, This Page!! (Remind me again how much these endorsements pay?)"</p>

<div class="article" style="background-image: url('img/GrappleTruck.jpg'), url('img/GrappleBot.jpg'); background-repeat: no-repeat; background-position: left -10px, right -10px;">

<br/>


<div style="width: 98%; margin-left:auto; margin-right:auto;">

            <ul class="nobullet tightlist">
                <li>
                    <fieldset style="background-color: white">
                    <legend style="background-color: white; border-radius: 6px;">Deck</legend>
                    <span class="help">
                        <input type="image" onclick="toggleHelp('help-deck');" src="img/help-circle.svg" class="help-icon"/>
                        <span class="help-text" id="help-deck">
                            Here you add pip sets to your deck. You select the colours of pips and then enter the number of cards in the Static section, or use the Varying section to create a range for that pip set. When you hit Add, they'll appear in the Chosen Deck section. Be careful with Varying to plan your ranges so your total deck size is as you intend it to be (usually 40). 
                        </span>
                    </span>
              <ul class="nobullet">
                  <li>
              <fieldset>
                  <legend>Generate Battle Icons</legend>
                  <select id="battleicons1">
                      <option value="X"></option>
                      <option value="K">Black</option>
                      <option value="B">Blue</option>
                      <option value="G">Green</option>
                      <option value="O">Orange</option>
                      <option value="W">White</option>
                  </select>
                  <select id="battleicons2">
                      <option value="X"></option>
                      <option value="K">Black</option>
                      <option value="B">Blue</option>
                      <option value="G">Green</option>
                      <option value="O">Orange</option>
                      <option value="W">White</option>
                  </select>
                  <select id="battleicons3">
                      <option value="X"></option>
                      <option value="K">Black</option>
                      <option value="B">Blue</option>
                      <option value="G">Green</option>
                      <option value="O">Orange</option>
                      <option value="W">White</option>
                  </select>
              <fieldset>
                  <legend>Static</legend>
                  <label for="card_count">Count:</label>
                  <input id="card_count"/>
                  <input type="button" value="Add" onClick="add_pipset()"/>
              </fieldset>
              <fieldset>
                  <legend>Varying</legend>
                  <label for="varying_start">Start:</label>
                  <input id="varying_start" size="2"/>
                  <label for="varying_end">End:</label>
                  <input id="varying_end" size="2"/>
                  <label for="varying_step">Step:</label>
                  <input id="varying_step" value="1" size="2"/>
                  <br/>
                  <input type="button" value="Add Range" onClick="add_ranged_pipset()"/>
              </fieldset>
              </fieldset>
                    <span class="help">
                        <input type="image" onclick="toggleHelp('help-pip-pattern');" src="img/help-circle.svg" class="help-icon"/>
                        <span class="help-text" id="help-pip-pattern">
                            The Pip Pattern is an Experts feature. Rather than building the deck, you can enter it in one go. For example, "W6 G4 OK15 BK15" would be a deck with 6 white, 4 green, 17 orange-black, and 17 blue-black pipped cards. An example range is "B3:15:2" to indicate varying the blue-pip count from 3, to 15, in steps of 2. X is recommended for no-pip cads. 
                        </span>
                    </span>
              <fieldset>
                  <legend>Pip Pattern</legend>
                  <label>Text:</label>
                  <input id="pip_pattern"/>
              </fieldset>
                  </li>
              </ul>
          </fieldset>
          </li>

          <li>
              <fieldset style="background-color: white">
                  <legend>Chosen Deck</legend>
                  <span class="help">
                      <input type="image" onclick="toggleHelp('help-chosen-deck');" src="img/help-circle.svg" class="help-icon"/>
                      <span class="help-text" id="help-chosen-deck">
                          As you add static or varying pip sets to your deck, they appear here. 
                      </span>
                  </span>
                  <ul class="nobullet tightlist" id="chosen_deck">
                  </ul>
              </fieldset>
          </li>
          <li>
          <fieldset style="background-color: white">
              <legend>Query</legend>
              <span class="help">
                  <input type="image" onclick="toggleHelp('help-query');" src="img/help-circle.svg" class="help-icon"/>
                  <span class="help-text" id="help-query">
                      You can set the number of times to test (10000 or 100000 are recommended), how many cards to flip, and pick from various standard queries. You can also write your own query. <br/><br/>
                      See <a target="pipql_manual" href="pipql-manual.html">the manual</a> for more details on PIPQL. 
                  </span>
              </span>
              <label for="iterations">Iterations:</label>
              <input id="iterations" value="10000" size="6"/>
              <label for="flip">Flip:</label>
              <input id="flip" value="2" size="2"/>
              <br/>
              <label for="canned">Canned Queries:</label>
              <select id="canned" onchange="replace_pipql('canned')">
                  <option value=""></option>
                  <option value="colours(*)=4">Grapple flipping 4 colours</option>
                  <option value="count(W)&gt;1">Chromia flipping at least WW</option>
                  <option value="count(O)&gt;=2 AND count(B)&gt;=2">Ultra Magnus flipping OOBB</option>
                  <option value="colours(OK)=2,colours(BW)">Fortress Maximus flipping OK and BW</option>
                  <option value="colours(WOB)=3">Private Red Alert flipping WOB</option>
                  <option value="colours(*)&gt;2">Slipstream flipping &gt;2 colours</option>
                  <option value="count(O),count(K)">Average number of orange/black in a flip</option>
              </select>
              <br/>
              <label for="pipql" style="display: block;">PIPQL Query:</label>
              <textarea id="pipql" rows="6" cols="80" style="display: block;"></textarea>
              <button type="button" onClick="test_from_form()">Run Query</button>
          </fieldset>
          </li>



<li>
<br/> <br/> 
    <fieldset>
        <span class="help">
            <input type="image" onclick="toggleHelp('help-results');" src="img/help-circle.svg" class="help-icon"/>
            <span class="help-text" id="help-results">
                Your results appear here. You will get multiple rows if you used a varying range in one of your pipsets. 
            </span>
        </span>
        <legend>Results</legend>
        <table id="pip_results"></table>
    </fieldset>
</li>
</ul>

    </div>

    </div>

    </div>

<p class="footer">Comic Book images courtesy of tfwiki.net under <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA-3.0</a>.  Icons MIT licensed from <a href="https://feathericons.com/">https://feathericons.com</a>.</p>
    </body>
    </html>
